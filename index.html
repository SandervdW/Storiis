<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Storiis &#x26A1; Create user stories faster than lightning</title>

    <link rel="stylesheet" href="styles.css">

    <script>
      function createStory() {
        document.getElementById("as").innerHTML = "As a ";
        document.getElementById("rol").innerHTML = document.getElementById("role").value;
        document.getElementById("can").innerHTML = " I can ";
        document.getElementById("cap").innerHTML = document.getElementById("capability").value;
        document.getElementById("so").innerHTML = ", so that ";
        document.getElementById("ben").innerHTML = document.getElementById("benefit").value;
        document.getElementById("punct").innerHTML = ".";
        /* CLEAR FORM AND FOCUS */
        document.getElementById("role").value = "";
        document.getElementById("capability").value = "";
        document.getElementById("benefit").value = "";
        document.getElementById("role").focus();
        /* SAVE PREVIOUS ENTRIES */
        var copy = document.getElementById("output");
        var text = copy.textContent;

        var para = document.createElement("li");
        var node = document.createTextNode(text);
        para.appendChild(node);

        var element = document.getElementById("saved");
        element.appendChild(para);
      }
      // DELETE ENTRY
      function deleteStory() {
        document.getElementById("role").value = "";
        document.getElementById("capability").value = "";
        document.getElementById("benefit").value = "";
        document.getElementById("role").focus();
      }
      // COPY STORY
      function copyStory() {
        var copyText = document.getElementById("output").textContent;
        copyText.select();
        document.execCommand('copy');
        document.getElementById("copystor").textContent = "Copied!";
      }
      /* SUBMIT ENTRY WITH ENTER KEY */
      document.onkeydown=function(evt){
        var keyCode = evt ? (evt.which ? evt.which : evt.keyCode) : event.keyCode;
        if(keyCode == 13)
        {
          createStory()
        }
      }
    </script>
  </head>

  <body>
    <div class="header">
      <h1>Storiis</h1>
    </div>
    <div class="story_form">
      <!-- USER STORY CREATION FORM -->
      <form>
        As a <label for="role">role</label><input type="text" id="role" placeholder="role" autofocus>
        I can <input type="text" id="capability" placeholder="capability">,
        so that <input type="text" id="benefit" placeholder="benefit">.
      </form>
      <button class="destructive" onclick="deleteStory()">Clear the form</button>

      <!-- SUBMIT BUTTON -->
      <div id="buttons">
        <button onclick="createStory()">&#8617; Add Story</button>
        <button id="copystor" onclick="copyStory()">Copy</button>
      </div>
    </div>

    <!-- OUTPUT -->
    <div id="stories">
      <div id="output">
        <span id="as"></span><span id="rol"></span><span id="can"></span><span id="cap"></span><span id="so"></span><span id="ben"></span><span id="punct"></span>
      </div>
      <!-- PREVIOUS STORIES -->
      <div id="saved">
        <ul id="list" reversed>
        </ul>
      </div>
    </div>
  </body>

</html>
